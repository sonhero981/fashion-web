{"ast":null,"code":"import { smartEscape } from \"./smartEscape.js\";\nexport function finalize_source(source, format, url_suffix) {\n  let source_to_sign;\n  source = source.replace(/([^:])\\/\\//g, '$1/');\n\n  if (source.match(/^https?:\\//i)) {\n    source = smartEscape(source);\n    source_to_sign = source;\n  } else {\n    source = encodeURIComponent(decodeURIComponent(source)).replace(/%3A/g, \":\").replace(/%2F/g, \"/\");\n    source_to_sign = source;\n\n    if (url_suffix) {\n      if (url_suffix.match(/[\\.\\/]/)) {\n        throw new Error('url_suffix should not include . or /');\n      }\n\n      source = source + '/' + url_suffix;\n    }\n\n    if (format != null) {\n      source = source + '.' + format;\n      source_to_sign = source_to_sign + '.' + format;\n    }\n  }\n\n  return [source, source_to_sign];\n}","map":{"version":3,"sources":["C:/Users/sonhe/OneDrive/Desktop/New folder/nhom6-csdlnc/client/node_modules/@cloudinary/url-gen/backwards/utils/finalize_source.js"],"names":["smartEscape","finalize_source","source","format","url_suffix","source_to_sign","replace","match","encodeURIComponent","decodeURIComponent","Error"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,OAAO,SAASC,eAAT,CAAyBC,MAAzB,EAAiCC,MAAjC,EAAyCC,UAAzC,EAAqD;AACxD,MAAIC,cAAJ;AACAH,EAAAA,MAAM,GAAGA,MAAM,CAACI,OAAP,CAAe,aAAf,EAA8B,KAA9B,CAAT;;AACA,MAAIJ,MAAM,CAACK,KAAP,CAAa,aAAb,CAAJ,EAAiC;AAC7BL,IAAAA,MAAM,GAAGF,WAAW,CAACE,MAAD,CAApB;AACAG,IAAAA,cAAc,GAAGH,MAAjB;AACH,GAHD,MAIK;AACDA,IAAAA,MAAM,GAAGM,kBAAkB,CAACC,kBAAkB,CAACP,MAAD,CAAnB,CAAlB,CAA+CI,OAA/C,CAAuD,MAAvD,EAA+D,GAA/D,EAAoEA,OAApE,CAA4E,MAA5E,EAAoF,GAApF,CAAT;AACAD,IAAAA,cAAc,GAAGH,MAAjB;;AACA,QAAIE,UAAJ,EAAgB;AACZ,UAAIA,UAAU,CAACG,KAAX,CAAiB,QAAjB,CAAJ,EAAgC;AAC5B,cAAM,IAAIG,KAAJ,CAAU,sCAAV,CAAN;AACH;;AACDR,MAAAA,MAAM,GAAGA,MAAM,GAAG,GAAT,GAAeE,UAAxB;AACH;;AACD,QAAID,MAAM,IAAI,IAAd,EAAoB;AAChBD,MAAAA,MAAM,GAAGA,MAAM,GAAG,GAAT,GAAeC,MAAxB;AACAE,MAAAA,cAAc,GAAGA,cAAc,GAAG,GAAjB,GAAuBF,MAAxC;AACH;AACJ;;AACD,SAAO,CAACD,MAAD,EAASG,cAAT,CAAP;AACH","sourcesContent":["import { smartEscape } from \"./smartEscape.js\";\nexport function finalize_source(source, format, url_suffix) {\n    let source_to_sign;\n    source = source.replace(/([^:])\\/\\//g, '$1/');\n    if (source.match(/^https?:\\//i)) {\n        source = smartEscape(source);\n        source_to_sign = source;\n    }\n    else {\n        source = encodeURIComponent(decodeURIComponent(source)).replace(/%3A/g, \":\").replace(/%2F/g, \"/\");\n        source_to_sign = source;\n        if (url_suffix) {\n            if (url_suffix.match(/[\\.\\/]/)) {\n                throw new Error('url_suffix should not include . or /');\n            }\n            source = source + '/' + url_suffix;\n        }\n        if (format != null) {\n            source = source + '.' + format;\n            source_to_sign = source_to_sign + '.' + format;\n        }\n    }\n    return [source, source_to_sign];\n}\n"]},"metadata":{},"sourceType":"module"}