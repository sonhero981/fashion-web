{"ast":null,"code":"import { FlagQualifier } from \"../qualifiers/flag/FlagQualifier.js\";\nimport { Qualifier } from \"./qualifier/Qualifier.js\";\nimport { mapToSortedArray } from \"./utils/dataStructureUtils.js\";\nimport { ActionModel } from \"./models/ActionModel.js\";\n/**\n * @summary SDK\n * @memberOf SDK\n * @description Defines the category of transformation to perform.\n */\n\nclass Action extends ActionModel {\n  constructor() {\n    super(...arguments); // We're using map, to overwrite existing keys. for example:\n    // addParam(w_100).addQualifier(w_200) should result in w_200. and not w_100,w_200\n\n    this.qualifiers = new Map(); // Unlike regular qualifiers, there can be multiple flags in each url component /fl_1,fl_2/\n    // If the falgs are added to the qualifiers map, only a single flag could exist in a component (it's a map)\n    // So flags are stored separately until the very end because of that reason\n\n    this.flags = [];\n    this.delimiter = ','; // {qualifier}{delimiter}{qualifier} for example: `${'w_100'}${','}${'c_fill'}`\n\n    this.actionTag = ''; // A custom name tag to identify this action in the future\n  }\n\n  prepareQualifiers() {}\n  /**\n   * @description Returns the custom name tag that was given to this action\n   * @return {string}\n   */\n\n\n  getActionTag() {\n    return this.actionTag;\n  }\n  /**\n   * @description Sets the custom name tag for this action\n   * @return {this}\n   */\n\n\n  setActionTag(tag) {\n    this.actionTag = tag;\n    return this;\n  }\n  /**\n   * @description Calls toString() on all child qualifiers (implicitly by using .join()).\n   * @return {string}\n   */\n\n\n  toString() {\n    this.prepareQualifiers();\n    return mapToSortedArray(this.qualifiers, this.flags).join(this.delimiter);\n  }\n  /**\n   * @description Adds the parameter to the action.\n   * @param {SDK.Qualifier} qualifier\n   * @return {this}\n   */\n\n\n  addQualifier(qualifier) {\n    // if string, find the key and value\n    if (typeof qualifier === 'string') {\n      const [key, value] = qualifier.toLowerCase().split('_');\n\n      if (key === 'fl') {\n        // if string qualifier is a flag, store it in the flags arrays\n        this.flags.push(new FlagQualifier(value));\n      } else {\n        // if the string qualifier is not a flag, create a new qualifier from it\n        this.qualifiers.set(key, new Qualifier(key, value));\n      }\n    } else {\n      // if a qualifier object, insert to the qualifiers map\n      this.qualifiers.set(qualifier.key, qualifier);\n    }\n\n    return this;\n  }\n  /**\n   * @description Adds a flag to the current action.\n   * @param {Qualifiers.Flag} flag\n   * @return {this}\n   */\n\n\n  addFlag(flag) {\n    if (typeof flag === 'string') {\n      this.flags.push(new FlagQualifier(flag));\n    } else {\n      if (flag instanceof FlagQualifier) {\n        this.flags.push(flag);\n      }\n    }\n\n    return this;\n  }\n\n  addValueToQualifier(qualifierKey, qualifierValue) {\n    this.qualifiers.get(qualifierKey).addValue(qualifierValue);\n    return this;\n  }\n\n}\n\nexport { Action };","map":{"version":3,"sources":["C:/Users/sonhe/OneDrive/Desktop/New folder/nhom6-csdlnc/client/node_modules/@cloudinary/url-gen/internal/Action.js"],"names":["FlagQualifier","Qualifier","mapToSortedArray","ActionModel","Action","constructor","arguments","qualifiers","Map","flags","delimiter","actionTag","prepareQualifiers","getActionTag","setActionTag","tag","toString","join","addQualifier","qualifier","key","value","toLowerCase","split","push","set","addFlag","flag","addValueToQualifier","qualifierKey","qualifierValue","get","addValue"],"mappings":"AAAA,SAASA,aAAT,QAA8B,qCAA9B;AACA,SAASC,SAAT,QAA0B,0BAA1B;AACA,SAASC,gBAAT,QAAiC,+BAAjC;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,MAAN,SAAqBD,WAArB,CAAiC;AAC7BE,EAAAA,WAAW,GAAG;AACV,UAAM,GAAGC,SAAT,EADU,CAEV;AACA;;AACA,SAAKC,UAAL,GAAkB,IAAIC,GAAJ,EAAlB,CAJU,CAKV;AACA;AACA;;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,SAAL,GAAiB,GAAjB,CATU,CASY;;AACtB,SAAKC,SAAL,GAAiB,EAAjB,CAVU,CAUW;AACxB;;AACDC,EAAAA,iBAAiB,GAAG,CAAG;AACvB;AACJ;AACA;AACA;;;AACIC,EAAAA,YAAY,GAAG;AACX,WAAO,KAAKF,SAAZ;AACH;AACD;AACJ;AACA;AACA;;;AACIG,EAAAA,YAAY,CAACC,GAAD,EAAM;AACd,SAAKJ,SAAL,GAAiBI,GAAjB;AACA,WAAO,IAAP;AACH;AACD;AACJ;AACA;AACA;;;AACIC,EAAAA,QAAQ,GAAG;AACP,SAAKJ,iBAAL;AACA,WAAOV,gBAAgB,CAAC,KAAKK,UAAN,EAAkB,KAAKE,KAAvB,CAAhB,CAA8CQ,IAA9C,CAAmD,KAAKP,SAAxD,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIQ,EAAAA,YAAY,CAACC,SAAD,EAAY;AACpB;AACA,QAAI,OAAOA,SAAP,KAAqB,QAAzB,EAAmC;AAC/B,YAAM,CAACC,GAAD,EAAMC,KAAN,IAAeF,SAAS,CAACG,WAAV,GAAwBC,KAAxB,CAA8B,GAA9B,CAArB;;AACA,UAAIH,GAAG,KAAK,IAAZ,EAAkB;AACd;AACA,aAAKX,KAAL,CAAWe,IAAX,CAAgB,IAAIxB,aAAJ,CAAkBqB,KAAlB,CAAhB;AACH,OAHD,MAIK;AACD;AACA,aAAKd,UAAL,CAAgBkB,GAAhB,CAAoBL,GAApB,EAAyB,IAAInB,SAAJ,CAAcmB,GAAd,EAAmBC,KAAnB,CAAzB;AACH;AACJ,KAVD,MAWK;AACD;AACA,WAAKd,UAAL,CAAgBkB,GAAhB,CAAoBN,SAAS,CAACC,GAA9B,EAAmCD,SAAnC;AACH;;AACD,WAAO,IAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIO,EAAAA,OAAO,CAACC,IAAD,EAAO;AACV,QAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC1B,WAAKlB,KAAL,CAAWe,IAAX,CAAgB,IAAIxB,aAAJ,CAAkB2B,IAAlB,CAAhB;AACH,KAFD,MAGK;AACD,UAAIA,IAAI,YAAY3B,aAApB,EAAmC;AAC/B,aAAKS,KAAL,CAAWe,IAAX,CAAgBG,IAAhB;AACH;AACJ;;AACD,WAAO,IAAP;AACH;;AACDC,EAAAA,mBAAmB,CAACC,YAAD,EAAeC,cAAf,EAA+B;AAC9C,SAAKvB,UAAL,CAAgBwB,GAAhB,CAAoBF,YAApB,EAAkCG,QAAlC,CAA2CF,cAA3C;AACA,WAAO,IAAP;AACH;;AAhF4B;;AAkFjC,SAAS1B,MAAT","sourcesContent":["import { FlagQualifier } from \"../qualifiers/flag/FlagQualifier.js\";\nimport { Qualifier } from \"./qualifier/Qualifier.js\";\nimport { mapToSortedArray } from \"./utils/dataStructureUtils.js\";\nimport { ActionModel } from \"./models/ActionModel.js\";\n/**\n * @summary SDK\n * @memberOf SDK\n * @description Defines the category of transformation to perform.\n */\nclass Action extends ActionModel {\n    constructor() {\n        super(...arguments);\n        // We're using map, to overwrite existing keys. for example:\n        // addParam(w_100).addQualifier(w_200) should result in w_200. and not w_100,w_200\n        this.qualifiers = new Map();\n        // Unlike regular qualifiers, there can be multiple flags in each url component /fl_1,fl_2/\n        // If the falgs are added to the qualifiers map, only a single flag could exist in a component (it's a map)\n        // So flags are stored separately until the very end because of that reason\n        this.flags = [];\n        this.delimiter = ','; // {qualifier}{delimiter}{qualifier} for example: `${'w_100'}${','}${'c_fill'}`\n        this.actionTag = ''; // A custom name tag to identify this action in the future\n    }\n    prepareQualifiers() { }\n    /**\n     * @description Returns the custom name tag that was given to this action\n     * @return {string}\n     */\n    getActionTag() {\n        return this.actionTag;\n    }\n    /**\n     * @description Sets the custom name tag for this action\n     * @return {this}\n     */\n    setActionTag(tag) {\n        this.actionTag = tag;\n        return this;\n    }\n    /**\n     * @description Calls toString() on all child qualifiers (implicitly by using .join()).\n     * @return {string}\n     */\n    toString() {\n        this.prepareQualifiers();\n        return mapToSortedArray(this.qualifiers, this.flags).join(this.delimiter);\n    }\n    /**\n     * @description Adds the parameter to the action.\n     * @param {SDK.Qualifier} qualifier\n     * @return {this}\n     */\n    addQualifier(qualifier) {\n        // if string, find the key and value\n        if (typeof qualifier === 'string') {\n            const [key, value] = qualifier.toLowerCase().split('_');\n            if (key === 'fl') {\n                // if string qualifier is a flag, store it in the flags arrays\n                this.flags.push(new FlagQualifier(value));\n            }\n            else {\n                // if the string qualifier is not a flag, create a new qualifier from it\n                this.qualifiers.set(key, new Qualifier(key, value));\n            }\n        }\n        else {\n            // if a qualifier object, insert to the qualifiers map\n            this.qualifiers.set(qualifier.key, qualifier);\n        }\n        return this;\n    }\n    /**\n     * @description Adds a flag to the current action.\n     * @param {Qualifiers.Flag} flag\n     * @return {this}\n     */\n    addFlag(flag) {\n        if (typeof flag === 'string') {\n            this.flags.push(new FlagQualifier(flag));\n        }\n        else {\n            if (flag instanceof FlagQualifier) {\n                this.flags.push(flag);\n            }\n        }\n        return this;\n    }\n    addValueToQualifier(qualifierKey, qualifierValue) {\n        this.qualifiers.get(qualifierKey).addValue(qualifierValue);\n        return this;\n    }\n}\nexport { Action };\n"]},"metadata":{},"sourceType":"module"}